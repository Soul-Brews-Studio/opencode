---
title: Permissions
description: Control which actions require approval to run.
---

By default, OpenCode allows most operations without approval, except `doom_loop` and `external_directory` which default to `ask`. You can configure this using the `permission` option.

```json title="opencode.json"
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "edit": "allow",
    "bash": "ask",
    "read": "allow",
    "skill": "ask",
    "webfetch": "deny",
    "doom_loop": "ask",
    "external_directory": "ask"
  }
}
```

This lets you configure granular controls for most built-in tools (and many plugin tools). Note that `write`, `patch`, and `multiedit` are all covered by `permission.edit`.

- `"ask"` — Prompt for approval before running the tool
- `"allow"` — Allow all operations without approval
- `"deny"` — Disable the tool

---

## Tools

Any tool that might access your filesystem, run commands, or use the network can be gated behind permissions.

Common permission keys:

- `edit` (also covers `write`, `patch`, `multiedit`)
- `bash`
- `read`
- `list`
- `glob`
- `grep`
- `lsp`
- `task`
- `todowrite` / `todoread`
- `skill`
- `webfetch`
- `websearch` / `codesearch`
- `doom_loop`
- `external_directory`

Each permission key can be either a single action (string), or an object mapping patterns to actions.

---

### edit

Use the `permission.edit` key to control whether file editing operations require user approval.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "edit": "ask"
  }
}
```

---

### bash

You can use the `permission.bash` key to control whether bash commands as a
whole need user approval.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "bash": "ask"
  }
}
```

Or, you can target specific commands and set it to `allow`, `ask`, or `deny`.

```json title="opencode.json"
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "bash": {
      "git push": "ask",
      "git status": "allow",
      "git diff": "allow",
      "npm run build": "allow",
      "ls": "allow",
      "pwd": "allow"
    }
  }
}
```

---

#### Wildcards

You can also use wildcards to manage permissions for specific bash commands.

:::tip
You can use wildcards to manage permissions for specific bash commands.
:::

For example, **disable all** Terraform commands.

```json title="opencode.json" {5}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "bash": {
      "terraform *": "deny"
    }
  }
}
```

You can also use the `*` wildcard to manage permissions for all commands. For
example, **deny all commands** except a couple of specific ones.

```json title="opencode.json" {5}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "bash": {
      "*": "deny",
      "pwd": "allow",
      "git status": "ask"
    }
  }
}
```

Here a specific rule can override the `*` wildcard.

---

##### Glob patterns

The wildcard uses simple regex globbing patterns.

- `*` matches zero or more of any character
- `?` matches exactly one character
- All other characters match literally

---

#### Scope of the `"ask"` option

When the agent asks for permission to run a particular bash command, it will request feedback with three options: `once`, `always`, and `reject`.

The `always` option stores a rule for a normalized **command prefix** (for example, `git status*` or `npm run dev*`). The prefix is derived from a built-in command-arity table (flags don’t count); for unknown commands it falls back to the first token.

When an agent asks for permission to run a command in a pipeline, each command is parsed separately, and the saved `always` rule applies per command.

---

### read

Use the `permission.read` key to control whether file reads require approval.

The permission patterns for `read` are absolute file paths.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "read": "ask"
  }
}
```

---

### list, glob, grep

You can also gate other "read-only" tools:

- `permission.list` — directory listings (patterns are directory paths)
- `permission.glob` — file globs (patterns are the glob patterns)
- `permission.grep` — content search (patterns are the regex patterns)

---

### skill

Use the `permission.skill` key to control whether the model can load skills via the built-in `skill` tool.

You can apply a single rule to all skills:

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "skill": "ask"
  }
}
```

Or configure per-skill rules (supports the same wildcard patterns as `permission.bash`):

```json title="opencode.json"
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "skill": {
      "*": "deny",
      "git-*": "allow",
      "frontend/*": "ask"
    }
  }
}
```

---

### webfetch

Use the `permission.webfetch` key to control whether the LLM can fetch web pages.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "webfetch": "ask"
  }
}
```

---

### doom_loop

Use the `permission.doom_loop` key to control whether approval is required when a doom loop is detected. A doom loop occurs when the same tool is called 3 times in a row with identical arguments.

This helps prevent infinite loops where the LLM repeatedly attempts the same action without making progress.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "doom_loop": "ask"
  }
}
```

---

### external_directory

Use the `permission.external_directory` key to control whether file operations require approval when accessing files outside the working directory.

This provides an additional safety layer to prevent unintended modifications to files outside your project.

```json title="opencode.json" {4}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "external_directory": "ask"
  }
}
```

---

## Agents

You can also configure permissions per agent. Where the agent specific config
overrides the global config. [Learn more](/docs/agents#permissions) about agent permissions.

```json title="opencode.json" {3-7,10-14}
{
  "$schema": "https://opencode.ai/config.json",
  "permission": {
    "bash": {
      "git push": "ask"
    }
  },
  "agent": {
    "build": {
      "permission": {
        "bash": {
          "git push": "allow"
        }
      }
    }
  }
}
```

For example, here the `build` agent overrides the global `bash` permission to
allow `git push` commands.

You can also configure permissions for agents in Markdown.

```markdown title="~/.config/opencode/agent/review.md"
---
description: Code review without edits
mode: subagent
permission:
  edit: deny
  bash: ask
  webfetch: deny
---

Only analyze code and suggest changes.
```
